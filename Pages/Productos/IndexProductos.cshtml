@page
@model ThreeYellowDucks.Pages.Productos.IndexProductosModel
@{
}

@if(Model.ListaCategorias.Count == 0)
{
	<div class="alert alert-info" role="alert">
		No hay categorías disponibles. Por favor, agregue una categoría antes de agregar productos.
	</div>
}
else if(Model.ListaProductos.Count == 0)
{
	<div class="alert alert-info" role="alert">
		No hay productos disponibles. Por favor, agregue un producto.
	</div>
	<a asp-page="CreateProducto" class="btn btn-success mb-3">Agregar Producto</a>
}
else
{
	<a asp-page="CreateProducto" class="btn btn-success mb-3">Agregar Producto</a>

	<table class="table">
		<thead>
			<tr>
				<th>Marca</th>
				<th>Tipo de producto</th>
				<th>Precio</th>
				<th>Cantidad</th>
				<th>Categoría</th>
				<th>Subtotal</th>
				<th>Acciones</th>
			</tr>
		</thead>
		<tbody>
			@foreach(var producto in Model.ListaProductos)
			{
				<tr>
					<td>@producto.MarcaNombre</td>
					<td>@producto.Tipo</td>
					<td>@producto.Precio.ToString("C")</td>
					<td>@producto.Cantidad</td>
					<td>@Model.CategoriasNombres[producto.IdCategoria]</td>
					<td>@((producto.Precio * producto.Cantidad).ToString("C"))</td>
					<td>
						<a asp-page="EditProducto" asp-route-id="@producto.Id" class="btn btn-primary btn-sm">Editar</a>
						<a asp-page="DeleteProducto" asp-route-id="@producto.Id" class="btn btn-danger btn-sm">Eliminar</a>
					</td>
				</tr>
			}
		</tbody>
	</table>
	<div class="text-end mt-2">
		<strong>Total estimado: @Model.TotalGeneral.ToString("C")</strong>
	</div>
}